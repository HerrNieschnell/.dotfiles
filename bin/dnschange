#!/usr/bin/env bash
[[ $EUID != 0 ]] && exec sudo -- "$0" "$@"

DNSCONF="/etc/dnsmasq.conf"

dnsadd(){
case "$1" in
		us)
/bin/cat << EOF >> $DNSCONF
server=/netflix.com/netflix.net/nflximg.com/192.169.69.169
server=/netflix.com/netflix.net/nflximg.com/192.169.69.168
EOF
;;
		uni)
/bin/cat << EOF >> $DNSCONF
server=134.93.8.13
server=134.93.8.159
EOF
;;
esac
}

dnsrestart(){
	systemctl restart dnsmasq
}

/bin/cat << EOF > $DNSCONF
listen-address=127.0.0.1
bind-interfaces
domain-needed
bogus-priv
all-servers
cache-size=10000
no-resolv
no-hosts
server=8.8.8.8
server=8.8.4.4
server=/bit/bbs/dyn/free/fur/geek/glue/gopher/indy/ing/micro/neo/null/oss/oz/parody/pirate/stl/62.113.200.106
server=/bit/bbs/dyn/free/fur/geek/glue/gopher/indy/ing/micro/neo/null/oss/oz/parody/pirate/stl/108.61.210.58
EOF

for item in $@
do
	case "${item}" in
		-u|--us)
			dnsadd us
			;;
		--uni)
			dnsadd uni
			;;
		-h|--help)
			echo "Usage sudo dnschange [-u|--us] [--uni]"
			;;
	esac
done
dnsrestart
# vim: set filetye=sh
